<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <meta http-equiv="x-ua-compatible" content="IE=EmulateIE8">
  <meta http-equiv="x-ua-compatible" content="IE=EmulateIE9">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge，chrome=1">
  <title>珠城先锋网</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/news.css">
  <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
  <!--[if IE 9]>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
<![endif]-->

<!--[if IE 8]>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
<![endif]-->
  <link rel="stylesheet" href="css/app.min.css">

  <style>
    .main-new {
      width: 90%;
      margin: 0px auto;
    }

    .warp {
      width: 50%;
      margin: 60px auto;
    }

    /*清除input默认样式*/
    input {
      border: 0;
      background-color: transparent;
    }

    /*搜索栏*/
    .search_box {
      width: 80%;
      height: 45px;
      box-sizing: border-box;
      box-shadow: 1px 1px 4px #e2e2e2;
      padding: 0px 5px;
      border: 1px solid #e2e2e2;
      border-radius: 4px;
      background-color: #f4f4f4;
      margin: 50px auto 20px auto;
    }

    .search_box:hover {
      box-shadow: 1px 1px 4px #43A9FF;
    }

    .search_box input {
      width: 80%;
      height: 45px;
      line-height: 30px;
      font-size: 15px;
      color: #8c8282;
    }

    .search_box .search_icon {
      float: left;
      display: inline-block;
      width: 45px;
      height: 45px;
      background: url("images/search.png") no-repeat center center;
      background-size: 28px 28px;
      margin-top: 3px;
    }

    /*搜索内容*/
    .search_content {
      width: 60%;
      margin: 0 auto;
      background-color: #fff;
      border-radius: 8px;
    }

    .search_content ul {
      padding-left: 0;
    }

    .search_content li {
      width: 90%;
      margin: 0 auto;
      height: 40px;
      line-height: 40px;
      box-sizing: border-box;
      border-bottom: .4px solid #e2e2e2;
      list-style: none;
    }

    .search_content li:last-child {
      border-bottom: 0;
    }

    .search_content li a {
      color: #8c8282;
    }
  
  </style>
  <script type="text/javascript" src="js/app.min.js"></script>

  <script type="text/javascript" src="js/jq-paginator.js"></script>
  <script type="text/javascript" src="js/config.js"></script>
  <script type="text/javascript" src="js/api.js"></script>
  <script type="text/javascript" src="js/common.js"></script>
</head>
<!-- Internet Explorer 已限制此网页运行脚本或ActiveX控件的解决方法 -->
<!-- saved from url=(0014)about:internet -->

<body id="some-element">
  <div id="app">
    <nav class="flex-style row">
      <div class="flex-style row fl" style="margin-left: 150px;">
        <span class="fl">欢迎光临珠城先锋网, 今天是<span id="nowTime">2020年03月23日</span></span>
        <div class="search fr" >
          <input class="fl" type="text" placeholder="请输入关键词搜索" name="" id="searchInput" value="" />
          <button id="search"><i>搜索</i></button>
        </div>
      </div>

      <div class="fr" style="margin-right: 150px;">
        <a href="javascript:setHome(this,window.location);" id="text">设为首页 |</a>
        <a href="#" id="setFavorite" onclick="AddFavorite(window.location,document.title)"
          href="javascript:void(0);">加入收藏 </a>
        <!-- <a href="./login.html" target="_blank">登录</a> -->

        <!-- <a href="#">意见反馈 |</a>
      <a href="#">手机APP下载</a> -->

      </div>

    </nav>
     <!-- 顶部栏目 -->
     <section class="content-top row flex-cstyle" >
      <div class="top">
         <ul id="contentTop">
           </ul> 
      </div>
    </section>
    <div class="content clearfix">
      
      <section class="clearfix">

        <div class="flex-cstyle row shine-group">
          <div id="topName">内容搜索</div>
          <div style="width: 80%; text-align: center;" id="topList">

          </div>

        </div>
        <div class="bottom-line"></div>
        <div class="sec-top" id="step">
          <a href="./index.html" target="_blank">首页</a>>
          <a href="#" target="_blank">内容搜索</a>

        </div>

        <!-- <div class="warp">

          <div class="search_box">
            <input type="text" placeholder="请输入搜索内容">
            <i class="search_icon"></i>
          </div>


          <div class="search_content search_default">
            <ul>
              
            </ul>
          </div>
        </div> -->
        <div class="section" style="width:100%">
          <div style="width: 100%; height: 100%;margin-top: 35px;" id="setNewListHold">
            暂无搜索内容
          </div>


        </div>


      </section>

      <div class="demo customBootstrap">
        <!-- <p>当前第 <span id="demo2-text"></span> 页</p> -->
        <ul id="demo2" class="pagination"></ul>
      </div>

      <section class="clearfix">
        <div class="flex-cstyle row links">
          <div class="fl">
            <span class="link-title">友情链接</span>
            <span style="color: #969696;font-size: 13px; ">Links</span>
          </div>

          <div class="webs fr">
            <span class="" data-type="1" style="background:#FAF9F5;">党建网站</span>
            <span  data-type="2">综合网站</span>
            <span  data-type="3">报刊网站</span>
          </div>
        </div>
        <ul class=" websites site1">
          <li><a href="http://www.12371.cn" target="_blank">共产党员网</a></li>
        
          <li><a href="http://cpc.people.com.cn/GB/64114/75347/" target="_blank">中共中央组织部</a></li>
           
          <li><a href="http://www.dangjiancn.com/" target="_blank">中国党建网</a></li>
           
          <li><a href="http://cpc.people.com.cn/" target="_blank">中国共产党新闻网</a></li>
           
          <li><a href="http://www.ccphistory.org.cn/" target="_blank">党史党建在线</a></li>
           
          <li><a href="http://www.dygbjy.gov.cn" target="_blank">全国远程教育网</a></li>
           
          <li><a href="http://www.bjdj.gov.cn/viewpubarticle.do?id=123393" target="_blank">北京组工</a></li>
           
          <li><a href="http://www.jszzb.gov.cn/" target="_blank">江苏党建</a></li>
        </ul>
        <ul class=" websites site2" style="display: none;">
          <li><a href="http://www.sohu.com/" target="_blank">搜狐网</a></li>
        
          <li><a href="http://www.sina.com.cn/" target="_blank">新浪网</a></li>
            
          <li><a href="http://www.china.com.cn/" target="_blank">中国网</a></li>
            
          <li><a href="http://www.people.com.cn/" target="_blank">人民网</a></li>
            
          <li><a href="http://www.xinhua.org/" target="_blank">新华网</a></li>
            
          <li><a href="http://www.china.com/zh_cn/" target="_blank">中华网</a></li>
            
          <li><a href="http://www.cntv.cn/" target="_blank">CCTV</a></li>

          
        </ul>
        <ul class="websites site3" style="display: none;">
          <li><a href="http://www.gxnews.com.cn/" target="_blank">广西新闻网</a></li>
        
          <li><a href="http://paper.people.com.cn/rmrb/html/2012-05/14/nbs.D110000renmrb_01.htm" target="_blank">人民日报</a></li>
           
          <li><a href="http://zjdaily.zjol.com.cn" target="_blank">浙江日报</a></li>
           
          <li><a href="http://epaper.cnnb.com.cn/rp/clt/newreader" target="_blank">宁波日报</a></li>
           
          <li><a href="http://www.chinadaily.com.cn/" target="_blank">中国日报</a></li>
           
          <li><a href="http://www.zuzhirenshi.com/dianzibao/index.htm" target="_blank">组织人事报</a></li>
           
          <li><a href="http://www.admaimai.com/newspaper/Detail10_1565.htm" target="_blank">光明日报</a></li>
          
        </ul>


      </section>
    </div>

    <footer style="color:rgb(60, 60, 60);text-align: center;">
      <!-- <div>
        <a href="#">联系我们</a>|
        <a href="#">网站地图</a>|
        <a href="#">法律申明</a>|
        <a href="#">投诉信箱</a>|
        <a href="#">免责申明</a>

      </div> -->
      <div>中共北海市委组织部主办</div>
      <div>地址 : 广西市合平路东二巷2号 邮编 : 53600</div>
      <div><a href="http://www.beian.gov.cn/portal/registerSystemInfo" target="_blank" style="padding: 0px;">桂公网安备 450502020000014号</a>&nbsp;&nbsp;<a href="http://www.miibeian.gov.cn" target="_blank" style="padding: 0px;">桂ICP备06006473号-1</a></div>
      <a href="http://bszs.conac.cn/sitename?method=show&id=11231DF6641C21ECE053022819AC104A" target="_blank">
        <img src="./images/u12.jpg" alt="">
      </a>
    </footer>
  </div>




  <script>
    $(function () {

      var text = '';
      var newText = '';
      var flag = 0;
      var pageNo = 1;

      var searchUrl = window.location.href;
      var searchData = searchUrl.split("="); //截取 url中的“=”,获得“=”后面的参数
      var searchText = decodeURI(searchData[1]); //decodeURI解码
      console.log('searchText');
      console.log(searchText);
      $("#searchInput").val(searchText);
      flag = 1;
      getSetList(1, searchText);
      // $(".keyword1").val(searchText);

      // var search_input = $(".search_box input"),
      //   search_content = $(".search_content");
      // $(search_input).on("keyup", function (e) {
      //   if (e.repeat) {
      //     return;
      //   }
      //   if (search_input.val() == '') {
      //     // $(search_content).show();
      //     return;
      //   }

      //   console.log(search_input.val().trim());
      //   text = search_input.val().trim();
      //   flag = 1;
      //   getSetList(1, text);
      //   //  模糊搜索文章
      //   // getSetList();
      // });







      //  初始化分页
      var totalPage = 1;




      function getSetList(page, text) {
        if(text == newText && page == pageNo){
          return;
        }
        pageNo = page || 1;
        var data = {
          current: pageNo,
          size: 10,
          query: text,
          catalogId: 80,
        }
        newText = text;
        var result = ajaxMethod('searchNews', '', data);
        console.log(result)

        if (result.code == 0 && result.data != null) {
          //do something
          if (result.data.size > result.data.total) {
            totalPage = 1;
          } else {
            totalPage = Math.ceil(result.data.total / result.data.size);
            console.log(totalPage);
          }

          if(flag == 1){
            console.log(flag)
            console.log('初始化分页')
            $("#demo2").jqPaginator({
            totalPages: totalPage,
            visiblePages: 10,
            currentPage: 1,
            first: '<li class="first"><a href="javascript:void(0);">首页<\/a><\/li>',
            prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
            next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
            last: '<li class="last"><a href="javascript:void(0);">末页<\/a><\/li>',
            page: '<li class="page"><a href="javascript:void(0);">{{page}}<\/a><\/li>',
            onPageChange: function (n,type) {
              // $("#demo2-text").html(n);
              console.log('type')
              console.log(type)
              
              
              flag == 0;

              if(type != 'init'){
                $('html,body').animate({ scrollTop: 250 }, 'slow');
                getSetList(n,text);
              }
              // getSetList(n,text);
              //  新闻列表
              // getSetList(n,text);

            }
          })
          }

          
          
          var list = result.data.records;
          var set = '';
          $('#setNewListHold').html(set);
          if(list.length == 0 && pageNo ==1){
            $('#setNewListHold').html('没有搜索到您要查找的内容');
            return;
          }
          list.forEach(function (value, index) {
            //  console.log(value)
            var srt = '<div class="main-new" >' +
              '<a target="_blank" href="./newDetail.html?id=' + value.id + '&pId=' + value.catalogId + '"><h3>' + value.title + '</h3></a>' +
              '<div class="flex-cstyle row main-content" >' +

              '<div class="shine-detail save">' + value.creatTs + '  </div></div></div>';


            set += srt

          })
          $('#setNewListHold').html(set);


        } else {

          $('#setNewListHold').html('没有搜索到您要查找的内容');
          //do something
        }
      }
      // console.log('totalPage');
      // console.log(totalPage);
      // $("#demo2").jqPaginator({
      //   totalPages: totalPage,
      //   visiblePages: 10,
      //   currentPage: 1,
      //   first: '<li class="first"><a href="javascript:void(0);">首页<\/a><\/li>',
      //   prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
      //   next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
      //   last: '<li class="last"><a href="javascript:void(0);">末页<\/a><\/li>',
      //   page: '<li class="page"><a href="javascript:void(0);">{{page}}<\/a><\/li>',
      //   onPageChange: function (n) {
      //     // $("#demo2-text").html(n);
      //     $('html,body').animate({ scrollTop: 250 }, 'slow');


      //     //  新闻列表
      //     getSetList(n,text);

      //   }
      // })



    })

  </script>
</body>

</html>
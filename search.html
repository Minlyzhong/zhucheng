<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>珠城先锋网</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/news.css">
  <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
  <link rel="stylesheet" href="css/app.min.css">

  <style>
.main-new{
  width:80%;
  margin:0px auto;
}

.warp {
	width:50%;
	margin:100px auto;
}
/*清除input默认样式*/
input {
	border:0;
	background-color:transparent;
}
/*搜索栏*/
.search_box {
	width:80%;
	height:45px;
	box-sizing:border-box;
	box-shadow:1px 1px 4px #e2e2e2;
	padding:0px 5px;
	border:1px solid #e2e2e2;
	border-radius:4px;
	background-color:#f4f4f4;
	margin:50px auto 20px auto;
}

.search_box:hover{
  box-shadow:1px 1px 4px #43A9FF;
}
.search_box input {
	width:80%;
	height:45px;
	line-height:30px;
	font-size:15px;
	color:#8c8282;
}
.search_box .search_icon {
	float:left;
	display:inline-block;
	width:45px;
	height:45px;
	background:url("images/search.png") no-repeat center center;
	background-size:28px 28px;
	margin-top:3px;
}
/*搜索内容*/
.search_content {
	width:60%;
	margin:0 auto;
	background-color:#fff;
	border-radius:8px;
}
.search_content ul {
	padding-left:0;
}
.search_content li {
	width:90%;
	margin:0 auto;
	height:40px;
	line-height:40px;
	box-sizing:border-box;
	border-bottom:.4px solid #e2e2e2;
	list-style:none;
}
.search_content li:last-child {
	border-bottom:0;
}
.search_content li a {
	color:#8c8282;
}
  </style>
  <script type="text/javascript" src="js/app.min.js"></script>
  
  <script type="text/javascript" src="js/jq-paginator.js"></script>
  <script type="text/javascript" src="js/config.js"></script>
  <script type="text/javascript" src="js/api.js"></script>
  <script type="text/javascript" src="js/common.js"></script>
</head>
<!-- Internet Explorer 已限制此网页运行脚本或ActiveX控件的解决方法 -->
<!-- saved from url=(0014)about:internet -->
<body id="some-element">
  <div id="app">
    <nav class="flex-style row">
      <div class="flex-style row">
        <span>欢迎光临珠城先锋网, 今天是<span id="nowTime">2020年03月23日</span></span>
        <!-- <div class="search">
          <input type="text" placeholder="请输入关键词搜索" name="" id="" value="" />
          <button><i>搜索</i></button>
      </div> -->
      </div>
    
      <div>
        <a href="javascript:setHome(this,window.location);" id="text" >设为首页 |</a>
      <a href="#" id="setFavorite" onclick="AddFavorite(window.location,document.title)"  href="javascript:void(0);">加入收藏 </a>
        <!-- <a href="#">意见反馈 |</a>
        <a href="#">手机APP下载</a> -->
        
      </div>
      
    </nav>
    
    <div class="content clearfix">
      <section class="clearfix">
        
        <div class="flex-cstyle row shine-group">
          <div id="topName">内容搜索</div>
          <div style="width: 90%; text-align: center;" id="topList">
            
          </div>
          
        </div>
        <div class="bottom-line"></div>
        <div class="sec-top" id="step">
          <a href="./index.html" target="_blank">首页</a>>
          <a href="#" target="_blank">内容搜索</a>
          
        </div>

        <div class="warp">
    
          <div class="search_box">
              <input type="text" placeholder="请输入搜索内容">
              <i class="search_icon"></i>
          </div>
      
          
          <div class="search_content search_default">
              <ul>
                  <!-- <li>南京理工</li>
                  <li>华师大</li>
                  <li>合工大</li>
                  <li>哈工大</li>
                  <li>复旦</li>
                  <li>清华</li>
                  <li>同济</li>
                  <li>南开</li>
                  <li>中山</li>
                  <li>南航</li>
                  <li>武汉</li> -->
              </ul>
          </div>
      </div>
        <div class="section" style="width:100%">
          <div style="width: 100%; height: 100%;" id="setNewListHold">
            暂无相关内容
          </div>
          
        
        </div>
    
        
      </section>
      
      <div class="demo customBootstrap">
        <!-- <p>当前第 <span id="demo2-text"></span> 页</p> -->
        <ul id="demo2" class="pagination flex-style"></ul>
      </div>
    
      <section class="clearfix">
        <div class="flex-cstyle row links">
          <div>
            <span class="link-title">友情链接</span>
            <span style="color: #969696;font-size: 13px; ">Links</span>
            </div>
         
          <div class="webs">
            <span class="webs-selected">党建网站</span>
            <span>综合网站</span>
            <span>报刊网站</span>
          </div>
        </div>
          <ul class="flex-style row websites">
            <li><a href="#">共产党员网</a></li>
            <li><a href="#">中共中央组织部</a></li>
            <li><a href="#">中国党建网</a></li>
            <li><a href="#">中国共产党新闻网</a></li>
            <li><a href="#">党史党建在线</a></li>
            <li><a href="#">全国远程教育网</a></li>
            <li><a href="#">北京组工</a></li>
            <li><a href="#">新浪网</a></li>
          </ul>
         
        
      </section>
    </div>
    
    <footer >
      <div>
        <a href="#">联系我们</a>|
        <a href="#">网站地图</a>|
        <a href="#">法律申明</a>|
        <a href="#">投诉信箱</a>|
        <a href="#">免责申明</a>
        
      </div>
      <div>中共北海市委组织部主办</div>
      <div>地址 : 广西市合平路东二巷2号 邮编 : 53600</div>
      <div>桂公网安备 450502020000014号</div>
      <img src="./images/bottom.png" alt="">
    </footer>
  </div>


    

<script>
 $(function(){

  getSetList();
      
  var search_input = $(".search_box input"),
        search_content = $(".search_content");
    $(search_input).on("keyup", function(e) {
                  if(e.repeat){
                return ;
              }
        if (search_input.val() == '') {
            $(search_content).show();
            return;
        }
       
          console.log(search_input.val().trim());
      
            //  模糊搜索文章
            // getSetList();
    });



      

   
  
   //  初始化分页
   var totalPage = 1;
   

  

   function getSetList(page){

    var pageNo = page || 1;
      var data = {
        current:pageNo,
        size:20,
        catalogId:101,
    }
    var result=ajaxMethod('newList','',data);
    console.log(result)
    
        if (result.code == 0 && result.data != null) {
            //do something
            if(result.data.size > result.data.total){
            totalPage = 1;
          }else{
            totalPage = Math.ceil(result.data.total/result.data.size);
            console.log(totalPage);
          }    
          var list = result.data.records;
          var set='';
          $('#setNewListHold').html(set); 
          list.forEach(function(value, index ){
                //  console.log(value)
                  var srt='<div class="main-new" >'+
                  '<a target="_blank" href="./newDetail.html?id='+value.id+'&pId='+value.catalogId+'"><h3>'+value.title+'</h3></a>'+
                  '<div class="flex-cstyle row main-content" >'+
                    
                    '<div class="shine-detail save">'+value.creatTs+'  </div></div></div>'; 
                  
                 
                 set += srt
                 
               })
               $('#setNewListHold').html(set);   
              
            
        } else {
            //do something
        }
    }
    console.log('totalPage');
    console.log(totalPage);
    $("#demo2").jqPaginator({
        totalPages: totalPage,
        visiblePages: 10,
        currentPage: 1,
        first: '<li class="first"><a href="javascript:void(0);">首页<\/a><\/li>',
        prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
        next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
        last: '<li class="last"><a href="javascript:void(0);">末页<\/a><\/li>',
        page: '<li class="page"><a href="javascript:void(0);">{{page}}<\/a><\/li>',
        onPageChange: function(n) {
          // $("#demo2-text").html(n);
            $('html,body').animate({scrollTop:300},'slow');

            
                //  新闻列表
                // getSetList(n);
            
        }
      })

    
    
 })

</script> 
</body>
</html>
